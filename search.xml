<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>furioso</title>
      <link href="//post/furioso/"/>
      <url>//post/furioso/</url>
      
        <content type="html"><![CDATA[<h1 id="About-Me"><a href="#About-Me" class="headerlink" title="About Me"></a>About Me</h1><blockquote><p><strong>furioso&lt;狂怒&gt;</strong> 旨在笔者用于自学Godot游戏引擎初期的demo项目，初期的构思是2D像素类ARPG游戏，核心玩法在于丰富的build以及roguelike地下城探险。</p></blockquote><h2 id="D-amp-D-龙与地下城"><a href="#D-amp-D-龙与地下城" class="headerlink" title="D&amp;D 龙与地下城"></a>D&amp;D <em>龙与地下城</em></h2><p>D20、open-ended、RPG、dungeon、class</p><h2 id="Godot-Game-Engine"><a href="#Godot-Game-Engine" class="headerlink" title="Godot Game Engine"></a>Godot Game Engine</h2><p><a href="https://godotengine.org/">https://godotengine.org/</a></p><ul><li>GDScript</li><li>free</li><li>open-source</li></ul><h1 id="Game-Design"><a href="#Game-Design" class="headerlink" title="Game Design"></a>Game Design</h1><h2 id="Art-Design"><a href="#Art-Design" class="headerlink" title="Art Design"></a>Art Design</h2><h2 id="System-Design"><a href="#System-Design" class="headerlink" title="System Design"></a>System Design</h2><h3 id="Character"><a href="#Character" class="headerlink" title="Character"></a>Character</h3><h4 id="stats"><a href="#stats" class="headerlink" title="stats"></a>stats</h4><h5 id="Strength-STR"><a href="#Strength-STR" class="headerlink" title="Strength STR"></a>Strength <em>STR</em></h5><ul><li>how hard hit something.</li><li>how much you can carry.</li></ul><h5 id="Dexterity-DEX"><a href="#Dexterity-DEX" class="headerlink" title="Dexterity DEX"></a>Dexterity <em>DEX</em></h5><ul><li>how fast you are.</li><li>how well you are with ranged attacks.</li></ul><h5 id="Constitution-CON"><a href="#Constitution-CON" class="headerlink" title="Constitution CON"></a>Constitution <em>CON</em></h5><ul><li>hit points.</li><li>resistance to negative effect.</li><li>how fast you sober up.</li></ul><h5 id="Wisdom-WIS"><a href="#Wisdom-WIS" class="headerlink" title="Wisdom WIS"></a>Wisdom <em>WIS</em></h5><ul><li>how perceptive you are.</li><li>naturally notice.</li></ul><h5 id="Intelligence-INT"><a href="#Intelligence-INT" class="headerlink" title="Intelligence INT"></a>Intelligence <em>INT</em></h5><ul><li>how much you know about things.</li></ul><h5 id="Charisma-CHA"><a href="#Charisma-CHA" class="headerlink" title="Charisma CHA"></a>Charisma <em>CHA</em></h5><ul><li>how good you persuading people.</li><li>how well you get on with NPCs.</li></ul><h3 id="Armor"><a href="#Armor" class="headerlink" title="Armor"></a>Armor</h3><ul><li><input disabled="" type="checkbox"> helmet</li><li><input disabled="" type="checkbox"> waist</li><li><input disabled="" type="checkbox"> belt</li><li><input disabled="" type="checkbox"> gloves</li><li><input disabled="" type="checkbox"> legs</li><li><input disabled="" type="checkbox"> cloth</li><li><input disabled="" type="checkbox"> boots</li><li><input disabled="" type="checkbox"> necklace</li><li><input disabled="" type="checkbox"> rings</li></ul><h3 id="Weapons"><a href="#Weapons" class="headerlink" title="Weapons"></a>Weapons</h3><h4 id="weapon-properties"><a href="#weapon-properties" class="headerlink" title="weapon properties"></a>weapon properties</h4><p>Many Weapons have special Properties related to their use, as shown in the Weapons table.</p><h5 id="Ammunition"><a href="#Ammunition" class="headerlink" title="Ammunition"></a>Ammunition</h5><p>You can use a weapon that has the Ammunition property to make a ranged Attack only if you have Ammunition to fire from the weapon. Each time you Attack with the weapon, you expend one piece of Ammunition. Drawing the Ammunition from a Quiver, case, or other container is part of the Attack (you need a free hand to load a one-handed weapon). At the end of the battle, you can recover half your expended Ammunition by taking a minute to Search the battlefield. If you use a weapon that has the Ammunition property to make a melee Attack, you treat the weapon as an Improvised Weapon (see “Improvised Weapons” later in the section). A sling must be loaded to deal any damage when used in this way.</p><h5 id="Finesse"><a href="#Finesse" class="headerlink" title="Finesse"></a>Finesse</h5><p>When making an Attack with a finesse weapon, you use your choice of your Strength or Dexterity modifier for the Attack and Damage Rolls. You must use the same modifier for both rolls.</p><h5 id="Heavy"><a href="#Heavy" class="headerlink" title="Heavy"></a>Heavy</h5><p>Small Creatures have disadvantage on Attack rolls with heavy Weapons. A heavy weapon’s size and bulk make it too large for a Small creature to use effectively.</p><h5 id="Light"><a href="#Light" class="headerlink" title="Light"></a>Light</h5><p>A light weapon is small and easy to handle, making it ideal for use when Fighting with two Weapons.</p><h5 id="Loading"><a href="#Loading" class="headerlink" title="Loading"></a>Loading</h5><p>Because of the time required to load this weapon, you can fire only one piece of Ammunition from it when you use an Action, bonus Action, or Reaction to fire it, regardless of the number of attacks you can normally make.</p><h5 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h5><p>A weapon that can be used to make a ranged Attack has a range in parentheses after the Ammunition or thrown property. The range lists two numbers. The first is the weapon’s normal range in feet, and the second indicates the weapon’s Long Range. When Attacking a target beyond normal range, you have disadvantage on the Attack roll. You can’t Attack a target beyond the weapon’s Long Range.</p><h5 id="Reach"><a href="#Reach" class="headerlink" title="Reach"></a>Reach</h5><p>This weapon adds 5 feet to your reach when you Attack with it, as well as when determining your reach for Opportunity Attacks with it.</p><h5 id="Special"><a href="#Special" class="headerlink" title="Special"></a>Special</h5><p>A weapon with the special property has unusual rules governing its use, explained in the weapon’s description (see “Special Weapons” later in this section).</p><h5 id="Thrown"><a href="#Thrown" class="headerlink" title="Thrown"></a>Thrown</h5><p>If a weapon has the thrown property, you can throw the weapon to make a ranged Attack. If the weapon is a melee weapon, you use the same ability modifier for that Attack roll and damage roll that you would use for a melee Attack with the weapon. For example, if you throw a Handaxe, you use your Strength, but if you throw a Dagger, you can use either your Strength or your Dexterity, since the Dagger has the finesse property.</p><h5 id="Two-Handed"><a href="#Two-Handed" class="headerlink" title="Two-Handed"></a>Two-Handed</h5><p>This weapon requires two hands when you Attack with it.</p><h5 id="Versatile"><a href="#Versatile" class="headerlink" title="Versatile"></a>Versatile</h5><p>This weapon can be used with one or two hands. A damage value in parentheses appears with the property—the damage when the weapon is used with two hands to make a melee Attack.</p><h5 id=""><a href="#" class="headerlink" title=""></a></h5><h4 id="simple-melee-weapons"><a href="#simple-melee-weapons" class="headerlink" title="simple melee weapons"></a>simple melee weapons</h4><ul><li><input disabled="" type="checkbox"> <a href="#Club">club</a> <code>短棍</code></li><li><input disabled="" type="checkbox"> <a href="#Dagger">dagger</a> <code>匕首</code></li><li><input disabled="" type="checkbox"> <a href="#Greatclub">greatclub</a> <code>长棍</code></li><li><input disabled="" type="checkbox"> <a href="#Handaxe">handaxe</a> <code>手斧</code></li><li><input disabled="" type="checkbox"> <a href="#Javelin">javelin</a> <code>标枪</code></li><li><input disabled="" type="checkbox"> <a href="#Light Hammer">light hammer</a> <code>轻锤</code></li><li><input disabled="" type="checkbox"> <a href="#Mace">mace</a> <code>权杖</code></li><li><input disabled="" type="checkbox"> <a href="#Quarterstaff">quarter staff</a> <code>铁头木棍</code></li><li><input disabled="" type="checkbox"> <a href="#Sickle">sickle</a> <code>镰刀</code></li><li><input disabled="" type="checkbox"> <a href="#Spear">spear</a> <code>短矛</code></li></ul><h4 id="simple-ranged-weapons"><a href="#simple-ranged-weapons" class="headerlink" title="simple ranged weapons"></a>simple ranged weapons</h4><ul><li><input disabled="" type="checkbox"> <a href="#Crossbow,light">crossbow,light</a> <code>轻弩</code></li><li><input disabled="" type="checkbox"> <a href="#Dart">dart</a> <code>飞镖</code></li><li><input disabled="" type="checkbox"> <a href="#Shortbow">shortbow</a> <code>短弓</code></li><li><input disabled="" type="checkbox"> <a href="#Sling">sling</a> <code>弹弓</code></li></ul><h4 id="martial-melee-weapons"><a href="#martial-melee-weapons" class="headerlink" title="martial melee weapons"></a>martial melee weapons</h4><ul><li><input disabled="" type="checkbox"> <a href="#Battleaxe">battleaxe</a> <code>双头战斧</code></li><li><input disabled="" type="checkbox"> <a href="#Flail">flail</a> <code>连枷</code></li><li><input disabled="" type="checkbox"> <a href="#Glaive">glaive</a> <code>长刀</code></li><li><input disabled="" type="checkbox"> <a href="#Greataxe">greataxe</a> <code>巨斧</code></li><li><input disabled="" type="checkbox"> <a href="#Greatsword">greatsword</a> <code>巨剑</code></li><li><input disabled="" type="checkbox"> <a href="#Halberd">halberd</a> <code>战戟</code></li><li><input disabled="" type="checkbox"> <a href="#Lance">lance</a> <code>长枪</code></li><li><input disabled="" type="checkbox"> <a href="#Longsword">longsword</a> <code>长剑</code></li><li><input disabled="" type="checkbox"> <a href="#Maul">maul</a> <code>大槌</code></li><li><input disabled="" type="checkbox"> <a href="#Morningstar">morningstar</a> <code>流星锤</code></li><li><input disabled="" type="checkbox"> <a href="#Pike">pike</a> <code>长矛</code></li><li><input disabled="" type="checkbox"> <a href="#Rapier">rapier</a> <code>刺剑</code></li><li><input disabled="" type="checkbox"> <a href="#Scimitar">scimitar</a> <code>弯刀</code></li><li><input disabled="" type="checkbox"> <a href="#Shortsword">short sword</a> <code>短剑</code></li><li><input disabled="" type="checkbox"> <a href="#Trident">trident</a> <code>三叉戟</code></li><li><input disabled="" type="checkbox"> <a href="#War pick">war pick</a> <code>钉头锤</code></li><li><input disabled="" type="checkbox"> <a href="#Warhammer">warhammer</a> <code>战锤</code></li><li><input disabled="" type="checkbox"> <a href="#Whip">whip</a> <code>长鞭</code></li></ul><h4 id="martial-ranged-weapons"><a href="#martial-ranged-weapons" class="headerlink" title="martial ranged weapons"></a>martial ranged weapons</h4><ul><li><input disabled="" type="checkbox"> <a href="#Blowgun">blowgun</a> <code>吹箭筒</code></li><li><input disabled="" type="checkbox"> <a href="#Crossbow,hand">crossbow,hand</a> <code>手弩</code></li><li><input disabled="" type="checkbox"> <a href="#Crossbow,heavy">crossbow,heavy</a> <code>重弩</code></li><li><input disabled="" type="checkbox"> <a href="#Longbow">longbow</a> <code>长弓</code></li><li><input disabled="" type="checkbox"> <a href="#Net">net</a> <code>网</code></li></ul><p>WEAPONS TABLE</p><table><thead><tr><th>Weapon</th><th>Weight</th><th>Damage Type</th><th>Armor Slot</th><th>Properties</th></tr></thead><tbody><tr><td><a id="Club">Club</a> <code>短棍</code></td><td>2</td><td>Bludgeoning</td><td></td><td>Light</td></tr><tr><td><a id="Dagger">Dagger</a> <code>匕首</code></td><td>1</td><td>Piercing</td><td></td><td>Finesse, light, thrown (range 20&#x2F;60)</td></tr><tr><td><a id="Greatclub">Greatclub</a> <code>长棍</code></td><td>10</td><td>Bludgeoning</td><td></td><td>Two-handed</td></tr><tr><td><a id="Handaxe">Handaxe</a> <code>手斧</code></td><td>2</td><td>Slashing</td><td></td><td>Light, thrown (range 20&#x2F;60)</td></tr><tr><td><a id="Javelin">Javelin</a> <code>标枪</code></td><td>2</td><td>Piercing</td><td></td><td>Thrown (range 30&#x2F;120)</td></tr><tr><td><a id="Light Hammer">Light Hammer</a> <code>轻锤</code></td><td>2</td><td>Bludgeoning</td><td></td><td>Light, thrown (range 20&#x2F;60)</td></tr><tr><td><a id="Mace">Mace</a> <code>权杖</code></td><td>4</td><td>Bludgeoning</td><td></td><td>-</td></tr><tr><td><a id="Quarterstaff">Quarterstaff</a> <code>铁头木棍</code></td><td>4</td><td>Bludgeoning</td><td></td><td>Versatile (1d8)</td></tr><tr><td><a id="Sickle">Sickle</a> <code>镰刀</code></td><td>2</td><td>Slashing</td><td></td><td>Light</td></tr><tr><td><a id="Spear">Spear</a> <code>短矛</code></td><td>3</td><td>Piercing</td><td></td><td>Thrown (range 20&#x2F;60), versatile (1d8)</td></tr><tr><td><a id="Crossbow,light">Crossbow,light</a> <code>轻弩</code></td><td>5</td><td>Piercing</td><td></td><td>Ammunition (range 80&#x2F;320), loading, two-handed</td></tr><tr><td><a id="Dart">Dart</a> <code>飞镖</code></td><td>1&#x2F;4</td><td>Piercing</td><td></td><td>Finesse, thrown (range 20&#x2F;60)</td></tr><tr><td><a id="Shortbow">Shortbow</a> <code>短弓</code></td><td>2</td><td>Piercing</td><td></td><td>Ammunition (range 80&#x2F;320), two-handed</td></tr><tr><td><a id="Sling">Sling</a> <code>弹弓</code></td><td>-</td><td>Bludgeoning</td><td></td><td>Ammunition (range 30&#x2F;120)</td></tr><tr><td><a id="Battleaxe">Battleaxe</a> <code>双头战斧</code></td><td>4</td><td>Slashing</td><td></td><td>Versatile (1d10)</td></tr><tr><td><a id="Flail">Flail</a> <code>连枷</code></td><td>2</td><td>Bludgeoning</td><td></td><td>-</td></tr><tr><td><a id="Glaive">Glaive</a> <code>长刀</code></td><td>6</td><td>Slashing</td><td></td><td>Heavy, reach, two-handed</td></tr><tr><td><a id="Greataxe">Greataxe</a> <code>巨斧</code></td><td>7</td><td>Slashing</td><td></td><td>Heavy, two-handed</td></tr><tr><td><a id="Greatsword">Greatsword</a> <code>巨剑</code></td><td>6</td><td>Slashing</td><td></td><td>Heavy, two-handed</td></tr><tr><td><a id="Halberd">Halberd</a> <code>战戟</code></td><td>6</td><td>Slashing</td><td></td><td>Heavy, reach, two-handed</td></tr><tr><td><a id="Lance">Lance</a> <code>长枪</code></td><td>6</td><td>Piercing</td><td></td><td>Reach, special</td></tr><tr><td><a id="Longsword">Longsword</a> <code>长剑</code></td><td>3</td><td>Slashing</td><td></td><td>Versatile (1d10)</td></tr><tr><td><a id="Maul">Maul</a> <code>大槌</code></td><td>10</td><td>Bludgeoning</td><td></td><td>Heavy, two-handed</td></tr><tr><td><a id="Morningstar">Morningstar</a> <code>流星锤</code></td><td>4</td><td>Piercing</td><td></td><td>-</td></tr><tr><td><a id="Pike">Pike</a> <code>长矛</code></td><td>18</td><td>Piercing</td><td></td><td>Heavy, reach, two-handed</td></tr><tr><td><a id="Rapier">Rapier</a>  <code>刺剑</code></td><td>2</td><td>Piercing</td><td></td><td>Finesse</td></tr><tr><td><a id="Scimitar">Scimitar</a>  <code>弯刀</code></td><td>3</td><td>Slashing</td><td></td><td>Finesse, light</td></tr><tr><td><a id="Shortsword">Shortsword</a> <code>短剑</code></td><td>2</td><td>Piercing</td><td></td><td>Finesse, light</td></tr><tr><td><a id="Trident">Trident</a>  <code>三叉戟</code></td><td>4</td><td>Piercing</td><td></td><td>Thrown (range 20&#x2F;60), versatile (1d8)</td></tr><tr><td><a id="War pick">War pick</a> <code>钉头锤</code></td><td>2</td><td>Piercing</td><td></td><td>-</td></tr><tr><td><a id="Warhammer">Warhammer</a> <code>战锤</code></td><td>2</td><td>Bludgeoning</td><td></td><td>Versatile (1d10)</td></tr><tr><td><a id="Whip">Whip</a> <code>长鞭</code></td><td>3</td><td>Slashing</td><td></td><td>Finesse, reach</td></tr><tr><td><a id="Blowgun">Blowgun</a> <code>吹箭筒</code></td><td>1</td><td>Piercing</td><td></td><td>Ammunition (range 25&#x2F;100), loading</td></tr><tr><td><a id="Crossbow,hand">Crossbow,hand</a> <code>手弩</code></td><td>3</td><td>Piercing</td><td></td><td>Ammunition (range 30&#x2F;120), light, loading</td></tr><tr><td><a id="Crossbow,heavy">Crossbow,heavy</a> <code>重弩</code></td><td>18</td><td>Piercing</td><td></td><td>Ammunition (range 100&#x2F;400), heavy, loading, two-handed</td></tr><tr><td><a id="Longbow">Longbow</a> <code>长弓</code></td><td>2</td><td>Piercing</td><td></td><td>Ammunition (range 150&#x2F;600), heavy, two-handed</td></tr><tr><td><a id="Net">Net</a> <code>网</code></td><td>3</td><td>-</td><td></td><td>Special, thrown (range 5&#x2F;15)</td></tr></tbody></table><h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><h4 id="warrior"><a href="#warrior" class="headerlink" title="warrior"></a>warrior</h4><h4 id="mage"><a href="#mage" class="headerlink" title="mage"></a>mage</h4><h4 id="rogue"><a href="#rogue" class="headerlink" title="rogue"></a>rogue</h4><h4 id="druid"><a href="#druid" class="headerlink" title="druid"></a>druid</h4><h4 id="paladin"><a href="#paladin" class="headerlink" title="paladin"></a>paladin</h4><h4 id="hunter"><a href="#hunter" class="headerlink" title="hunter"></a>hunter</h4><h3 id="Spells"><a href="#Spells" class="headerlink" title="Spells"></a>Spells</h3><h3 id="Abilities"><a href="#Abilities" class="headerlink" title="Abilities"></a>Abilities</h3><h3 id="Auras"><a href="#Auras" class="headerlink" title="Auras"></a>Auras</h3><h3 id="Dungeon"><a href="#Dungeon" class="headerlink" title="Dungeon"></a>Dungeon</h3><h3 id="Landscape"><a href="#Landscape" class="headerlink" title="Landscape"></a>Landscape</h3><h3 id="Items"><a href="#Items" class="headerlink" title="Items"></a>Items</h3><h2 id="Simulation"><a href="#Simulation" class="headerlink" title="Simulation"></a>Simulation</h2>]]></content>
      
      
      <categories>
          
          <category> Game </category>
          
          <category> Design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Godot </tag>
            
            <tag> D&amp;D </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tmux初尝</title>
      <link href="//post/tmux%E5%88%9D%E5%B0%9D/"/>
      <url>//post/tmux%E5%88%9D%E5%B0%9D/</url>
      
        <content type="html"><![CDATA[<h1 id="Tmux-初尝"><a href="#Tmux-初尝" class="headerlink" title="Tmux 初尝"></a>Tmux 初尝</h1>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="//post/hello-world/"/>
      <url>//post/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Nebula Graph图库预研</title>
      <link href="//post/nebula-graph/"/>
      <url>//post/nebula-graph/</url>
      
        <content type="html"><![CDATA[<h1 id="图数据库相关预研交流"><a href="#图数据库相关预研交流" class="headerlink" title="图数据库相关预研交流"></a>图数据库相关预研交流</h1><h2 id="为什么要用图数据库"><a href="#为什么要用图数据库" class="headerlink" title="为什么要用图数据库"></a>为什么要用图数据库</h2><p>图数据库是基于图模型的数据库。相比较于关系型数据库，图数据库是真正注重“关系”的数据库，图数据库在处理关联关系上具有完全的优势。世界上几乎所有领域的事物都有内在联系，像关系型数据库这样的建模系统会将关系和属性单独存储到表和列中，这使得数据管理费时费力，并且难以挖掘和发现深层的数据之间的联系。</p><ul><li><p>图数据库相对于传统关系型数据库的优势：</p><ul><li><p>易建模：图中存储的是带属性的实体和带属性的关系，能够更为直接、自然的表达现实世界。</p></li><li><p>易查询：相比于关系型数据库的复杂关联查询sql，图查询语言，方便描述查询条件，并且图数据库得益于其存储模型和基于存储模型上优化的查询算法，可以高效的处理复杂关联关系查询。</p></li><li><p>易展示：由于建模的简单，基于图数据库的图形化展示也非常友好。</p></li><li><p>易扩展：相对于关系型数据库对新类型的数据和关系需要重新设计模式，图数据库的数据结构清晰简明，可以灵活应对海量的关系变化进行增删改。</p></li></ul></li><li><p>应用场景：</p><ul><li><p>知识图谱：知识图谱对海量信息进行智能化处理，形成大规模的知识库并进而支撑业务应用，为项目中的决策，搜索，智能推荐功能提供支撑。</p></li><li><p>行业领域：图是基于事物关联关系的模型表达，具有天然解释性，因此图数据库与图处理引擎集成的图系统带来的强大的图存储和分析能力，推动了产业数据中信息和知识的挖掘与利用。</p></li></ul></li></ul><h2 id="图数据库选型"><a href="#图数据库选型" class="headerlink" title="图数据库选型"></a>图数据库选型</h2><h4 id="为什么放弃-JanusGraph"><a href="#为什么放弃-JanusGraph" class="headerlink" title="为什么放弃 JanusGraph"></a><em>为什么放弃 JanusGraph</em></h4><ul><li>写入效率低，基于ES的索引后端和Hbase的存储后端本身具有局限性</li><li>查询效率低，索引本身基于ES，非图结构</li><li>生态不完善，周边工具少</li><li>中文社区不活跃，文档少</li></ul><h4 id="为什么选择Nebula-Graph"><a href="#为什么选择Nebula-Graph" class="headerlink" title="为什么选择Nebula Graph"></a><em>为什么选择Nebula Graph</em></h4><ul><li><p>索引和存储都基于RocksDB，本身就是高效磁盘KV数据库，能做到和Redis内存数据库差不多的查询性能</p></li><li><p>自带语法类SQL，易于学习，且支持Cypher语法（Neo4j语法）</p><pre><code class="sql">(root@nebula) [test]&gt; (GO 1 TO 15 STEPS FROM 9596900216 OVER label_parent   YIELD dst(edge) AS id |GO 1  STEPS FROM $-.id OVER label YIELD properties($$).ks_name AS NAME,id($$) as id ,labels($$) AS label UNION DISTINCT GO 1 STEPS FROM 9596900216 OVER label YIELD properties($$).ks_name AS NAME,id($$) as id ,labels($$) AS label LIMIT [100]) | GO 1 STEPS FROM $-.id OVER branch, invest, workIn BIDIRECT YIELD properties($$).ks_name AS NAME,id($$) as id ,labels($$) AS label LIMIT [100];</code></pre><pre><code class="shell">Got 61 rows (time spent 164274/175179 us)</code></pre></li><li><p>面向中国市场，社区活跃，官方文档完善</p></li><li><p>周边生态完善，且开发活跃度高</p></li></ul><h4 id="Nebula-Graph生态"><a href="#Nebula-Graph生态" class="headerlink" title="Nebula Graph生态"></a><em>Nebula Graph生态</em></h4><blockquote><p>Nebula Graph 是一款开源的、分布式的、易扩展的原生图数据库，能够承载数千亿个点和数万亿条边的超大规模数据集，并且提供毫秒级查询。</p></blockquote><p><img src="https://docs.nebula-graph.com.cn/2.6.1/1.introduction/nebula-birdview.png" alt="Nebula Graph 鸟瞰图"></p><h4 id="Nebula-Graph架构"><a href="#Nebula-Graph架构" class="headerlink" title="Nebula Graph架构"></a><em>Nebula Graph架构</em></h4><blockquote><p>Nebula Graph 由三种服务构成：Graph 服务、Meta 服务和 Storage 服务，是一种存储与计算分离的架构。各个节点的Meta 服务和Storage 服务通过<strong>Raft</strong>协议进行</p></blockquote><h5 id="Raft"><a href="#Raft" class="headerlink" title="Raft"></a><em>Raft</em></h5><blockquote><p>分布式系统中，同一份数据通常会有多个副本，这样即使少数副本发生故障，系统仍可正常运行。这就需要一定的技术手段来保证多个副本之间的一致性。</p><p>基本原理：Raft 就是一种用于保证多副本一致性的协议。Raft 采用多个副本之间竞选的方式，赢得”超过半数”副本投票的（候选）副本成为 Leader，由 Leader 代表所有副本对外提供服务；其他 Follower 作为备份。当该 Leader 出现异常后（通信故障、运维命令等），其余 Follower 进行新一轮选举，投票出一个新的 Leader。Leader 和 Follower 之间通过心跳的方式相互探测是否存活，并以 Raft-wal 的方式写入硬盘，超过多个心跳仍无响应的副本会认为发生故障。</p><p>读写流程：对于客户端的每个写入请求，Leader 会将该写入以 Raft-wal 的方式，将该条同步给其他 Follower，并只有在“超过半数”副本都成功收到 Raft-wal 后，才会返回客户端该写入成功。对于客户端的每个读取请求，都直接访问 Leader，而 Follower 并不参与读请求服务。</p></blockquote><p><img src="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png" alt="Nebula Graph architecture"></p><h2 id="图构建"><a href="#图构建" class="headerlink" title="图构建"></a>图构建</h2><h4 id="图数据模型"><a href="#图数据模型" class="headerlink" title="图数据模型"></a><em>图数据模型</em></h4><ul><li><p>图空间（Space）</p><p>图空间用于隔离不同团队或者项目的数据。不同图空间的数据是相互隔离的，可以指定不同的存储副本数、权限、分片等。</p></li><li><p>点（Vertex）</p><p>点用来保存实体对象，特点如下：</p><ul><li>点是用点标识符（<code>VID</code>）标识的。<code>VID</code>在同一图空间中唯一。VID 是一个 int64，或者 fixed_string(N)。</li><li>点必须有至少一个 Tag，也可以有多个 Tag。但不能没有 Tag。</li></ul></li><li><p>边（Edge）</p><p>边是用来连接点的，表示两个点之间的关系或行为，特点如下：</p><ul><li>两点之间可以有多条边。</li><li>边是有方向的，不存在无向边。</li><li>四元组 <code>&lt;起点 VID、Edge type、边排序值 (Rank)、终点 VID&gt;</code> 用于唯一标识一条边。边没有 EID。</li><li>一条边有且仅有一个 Edge type。</li><li>一条边有且仅有一个 rank。其为 int64，默认为 0。</li></ul></li><li><p>标签（Tag）</p><p>Tag 由一组事先预定义的属性构成。</p></li><li><p>边类型（Edge type）</p><p>Edge type 由一组事先预定义的属性构成。</p></li><li><p>属性（Properties）</p><p>属性是指以键值对（Key-value pair）形式存储的信息。</p></li></ul><h4 id="图模型设计"><a href="#图模型设计" class="headerlink" title="图模型设计"></a><em>图模型设计</em></h4><img src="/img/hs-graph/image-20211126091300422.png" alt="image-20211126091300422"  /><h5 id="如何获取语义层级？"><a href="#如何获取语义层级？" class="headerlink" title="如何获取语义层级？"></a>如何获取语义层级？</h5><p>采用普林斯顿大学WordNet语义词典，将不同实体进行语义层级上的链接，形成hierarchy层级结构的概念-实体网络。</p><h5 id="有什么作用？"><a href="#有什么作用？" class="headerlink" title="有什么作用？"></a>有什么作用？</h5><p>当实体和实体之间具有语义关系的时候，我们可以举个例子:</p><p>当用户需要查询一家生产研究某种药品的机构的时候，用户本身并不知道与该药品相关联的是科研机构（<strong>academyn02</strong>）还是企业（<strong>companyn01</strong>）或者是科研院校（<strong>universityn03</strong>）甚至是医疗机构（<strong>hospitaln02</strong>），那么传统关系型数据库的查询方式是通过药品id去关联四张表获取到的结果进行排序返回。独立建模的图数据库的查询方式是通过药品vid通过一度关系查询终点，并且限制终点的标签</p><p>当加入语义层级之后，我们可以看到该4个实体的上级概念都是<strong>institutionn01</strong>，我们在图数据库中对打上上面4个标签的个体另外打上<strong>institutionn01</strong>的标签，这样通过药品vid直接一度关系查询终点标签为<strong>institutionn01</strong>，就可以得到相同的结果</p><p>这对客户在不清楚目标实体具体是什么，但是大概有个目标概念范围的时候能得到很好的查询体验。</p><p><img src="/img/hs-graph/image-20211126092643482.png" alt="image-20211126092643482"></p><ul><li>Repo  <!-- - http://git.aihuoshi.net/wud/knowledge_graph --></li><li>Language<ul><li>Markdown</li><li>nGQL</li></ul></li><li>Dependences</li></ul><h4 id="图数据流"><a href="#图数据流" class="headerlink" title="图数据流"></a><em>图数据流</em></h4><h5 id="离线数据流"><a href="#离线数据流" class="headerlink" title="离线数据流"></a><em>离线数据流</em></h5><img src="/img/hs-graph/data_flow.png" alt="data_flow" style="zoom:80%;" /><ul><li>Repo  <!-- - http://git.aihuoshi.net/keystone/graph-builder --></li><li>Language<ul><li>Scala</li></ul></li><li>Dependences<ul><li>Jdk 1.8</li><li>Scala 2.2.0</li><li>nebula-spark-connector</li><li>Maven 3.6.3</li></ul></li></ul><h5 id="实时数据流"><a href="#实时数据流" class="headerlink" title="实时数据流"></a><em>实时数据流</em></h5><blockquote><p>利用nebula-flink-connector库</p></blockquote><h2 id="图服务"><a href="#图服务" class="headerlink" title="图服务"></a>图服务</h2><h4 id="基础服务"><a href="#基础服务" class="headerlink" title="基础服务"></a><em>基础服务</em></h4><p>对nGQL进行封装，提供标准化查询接口，提供标准化写入接口，并提供标准接口文档</p><ul><li>Repo  <!-- - http://git.aihuoshi.net/keystone/graph-server --></li><li>Language<ul><li>Go</li></ul></li><li>Dependences<ul><li>Gin 1.7.4+</li><li>Go 1.6+</li></ul></li><li>Features<ul><li><input disabled="" type="checkbox"> 通用查询<ul><li><input checked="" disabled="" type="checkbox"> go语句 <code>根据指定条件遍历图</code><ul><li><input checked="" disabled="" type="checkbox"> aggregation</li><li><input checked="" disabled="" type="checkbox"> orderby</li><li><input checked="" disabled="" type="checkbox"> n-steps</li><li><input checked="" disabled="" type="checkbox"> sorting</li><li><input checked="" disabled="" type="checkbox"> groupby</li><li><input checked="" disabled="" type="checkbox"> direction</li><li><input checked="" disabled="" type="checkbox"> pagination</li></ul></li><li><input disabled="" type="checkbox"> match语句 <code>模式匹配</code></li><li><input disabled="" type="checkbox"> lookup语句 <code>根据索引遍历图</code></li><li><input disabled="" type="checkbox"> fetch语句 <code>获取点和边的属性</code></li><li><input disabled="" type="checkbox"> unwind语句 <code>拆分列表</code></li></ul></li><li><input disabled="" type="checkbox"> 变量和复合查询</li><li><input checked="" disabled="" type="checkbox"> 运算符</li><li><input checked="" disabled="" type="checkbox"> 函数和表达式</li><li><input disabled="" type="checkbox"> 子图和路径</li><li><input checked="" disabled="" type="checkbox"> Graphql<ul><li>支持graphql风格</li></ul></li></ul></li></ul><h4 id="分析模型"><a href="#分析模型" class="headerlink" title="分析模型"></a><em>分析模型</em></h4><p>提供通用的分析模型，标准化出参和入参</p><ul><li>股权穿透</li><li>社区发现</li><li>最短距离</li><li>标签传播</li><li>串标围标</li><li>产业链分析</li><li>…</li></ul><h4 id="算法调度平台-一站式工作台"><a href="#算法调度平台-一站式工作台" class="headerlink" title="算法调度平台(一站式工作台)"></a><em>算法调度平台(一站式工作台)</em></h4><h5 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h5><p><img src="https://p0.meituan.net/travelcube/cb913705f4da670a665bf6f00b66e044359254.png" alt="img"></p><h5 id="与业务系统的结合"><a href="#与业务系统的结合" class="headerlink" title="与业务系统的结合"></a>与业务系统的结合</h5><ul><li>算法工程师发布模型，定义出入参和算法服务路由</li><li>用户注册apiKey</li><li>用户带apiKey和对应的参数RPC&#x2F;HTTP调用算法服务</li><li>算法服务返回结果</li></ul><p><img src="https://p0.meituan.net/travelcube/fb9cbe21519c1c291ef74e568ba526f3165491.png" alt="图2 机器学习在线服务示意图"></p><h4 id="搜索场景"><a href="#搜索场景" class="headerlink" title="搜索场景"></a><em>搜索场景</em></h4><p>Elasticsearch &#x2F; Solr做搜索是目前工业上比较成熟的技术方案，通过Lucene的倒排索引数据结构能够低时耗、高准确返回搜索结果。但是传统的搜索场景局限于<strong>关键字检索</strong>，对于海量数据实体之间的关系和搜索query的意图识别力不从心，缺乏“人性化“。</p><p>在图数据库以及图计算近几年的崛起之下，基于知识图谱的搜索引擎以及成为主流，比如Google就是把搜索核心从倒排索引转向知识图谱。</p><p>在这个背景下，对query的意图识别成为搜索引擎的核心关键技术，加也是NLP在工业上应用的重点领域。</p><p>因此，构建产业大数据知识图谱并且支撑搜索、推荐业务，是可以预见的，明确的发展目标。从而给公司的产品提供更多的可能性。</p><p>搜索、推荐业务有几个特点</p><ul><li><p>高适用</p><blockquote><p>基本所有项目和产品都具有搜索的场景，火石的产业搜索引擎没有技术到落地的业务需求沟壑</p></blockquote></li><li><p>高频率</p><blockquote><p>搜索场景是用户高频使用的功能模块</p></blockquote></li><li><p>高反馈</p><blockquote><p>用户对搜索的结果具有较高、较清晰的体验反馈</p></blockquote></li></ul><h5 id="基本架构"><a href="#基本架构" class="headerlink" title="基本架构"></a><em>基本架构</em></h5><img src="/img/hs-graph/image-20211126095126214.png" alt="image-20211126095126214" style="zoom:70%;" /><h2 id="图工具扩展"><a href="#图工具扩展" class="headerlink" title="图工具扩展"></a>图工具扩展</h2><h4 id="图分析平台"><a href="#图分析平台" class="headerlink" title="图分析平台"></a><em>图分析平台</em></h4><ul><li><p>项目管理</p></li><li><p>数据源管理</p></li><li><p>可视化算子</p><ul><li>filter</li><li>steps</li><li>match</li><li>scan</li><li>yield</li></ul></li><li><p>模型管理</p></li><li><p>模型发布</p></li><li><p>控制台（带权限）</p></li></ul><h4 id="图数据库管理工具"><a href="#图数据库管理工具" class="headerlink" title="图数据库管理工具"></a><em>图数据库管理工具</em></h4><ul><li><p>Nebula Writer (datax plugin？)</p></li><li><p>图库运行监控</p></li><li><p>元数据管理</p><ul><li>space</li><li>schema</li><li>stats</li></ul></li><li><p>ETL流程任务管理</p><ul><li>spark任务集群</li></ul></li><li><p>图空间数据切割（SaaS -&gt; 项目）</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> graph </category>
          
      </categories>
      
      
        <tags>
            
            <tag> graph </tag>
            
            <tag> nebula graph </tag>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>datax web使用手册</title>
      <link href="//post/datax-web/"/>
      <url>//post/datax-web/</url>
      
        <content type="html"><![CDATA[<blockquote><p>:green_book: 您正在浏览的是DataX Web v1.x的操作文档</p></blockquote><h2 id="新功能更新记录"><a href="#新功能更新记录" class="headerlink" title="新功能更新记录"></a>新功能更新记录</h2><h3 id="重要功能发布记录"><a href="#重要功能发布记录" class="headerlink" title="重要功能发布记录"></a>重要功能发布记录</h3><table><thead><tr><th align="left">日期</th><th>内容</th></tr></thead><tbody><tr><td align="left">2021-08-05</td><td>增量同步功能，及前端用户体验优化；EsWriter默认upsert方式增量同步</td></tr><tr><td align="left">2021-08-06</td><td>新增指定EsWriter指定某个字段作为_id；</td></tr><tr><td align="left">2021-08-12</td><td>项目管理删除时改为逻辑删除；任务管理筛选条件新增执行状态；</td></tr><tr><td align="left">2021-08-19</td><td>前端更新：增量时间字段模板，pg和es做区分</td></tr><tr><td align="left">2021-08-21</td><td>用户信息增加邮箱，创建任务时，告警邮件默认加入用户邮箱</td></tr><tr><td align="left">2021-08-25</td><td>更新数据源时,可以选择更新所有用到该数据源的datax任务；判断相同调度时间jobCron的任务是否超过十个,如是,则调度时间后移10分钟</td></tr><tr><td align="left">2021-08-31</td><td>reader和writer字段模糊匹配接口</td></tr><tr><td align="left">2021-09-07</td><td>前端更改查看日志方式，新增查看最近一条日志</td></tr><tr><td align="left">2021-09-09</td><td>对任务管理，任务日志，数据源以及，datax任务模板做权限管理 ；邮件加入详细日志； 前端针对pg,加入视图配置</td></tr><tr><td align="left">2021-09-13</td><td>加入钉钉报警</td></tr><tr><td align="left">2021-09-16</td><td>优化自定postgresql自定义sql的构建方式 ；postgresql前端增加writeMode</td></tr><tr><td align="left">2021-12-02</td><td>esReader加scroll和size，去掉es7读取字段有doc和doc_as_upsert</td></tr><tr><td align="left">2022-01-07</td><td>增加esWriter,自动创建索引</td></tr><tr><td align="left">2022-01-14</td><td>mysqlWriter增加writeMode</td></tr><tr><td align="left">2022-01-16</td><td>子任务，根据project_id获取job list</td></tr><tr><td align="left">2022-01-18</td><td>日志搜索，可以根据日志id和任务名称模糊搜索； 项目管理增加用户权限 ；增加项目导出功能</td></tr></tbody></table><h3 id="历史版本"><a href="#历史版本" class="headerlink" title="历史版本"></a>历史版本</h3><h2 id="指南"><a href="#指南" class="headerlink" title="指南"></a>指南</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>火石DataX Web（以下简称DataX）是基于开源项目<a href="https://github.com/WeiYe-Jing/datax-web">datax-web</a> 二次开发的分布式数据同步工具。特别对火石常用的数据库中间件插件做了针对性的优化。</p><p>DataX提供简单易用的操作界面，降低用户使用DataX进行数据同步的学习成本，提供傻瓜式任务配置方式，智能匹配字段映射，极大避免配置过程中出错。支持RDBMS、Hive、Hbase等数据源，支持实时查看数据同步进度及日志并且提供任务终止功能，集成XXL-JOB任务调度框架，提供定时增量方式同步数据。</p><p>DataX目前已经在公司内部推广服务于绝大多数项目和团队，展现其易用性和泛用性。公司内部也有专门的团队对DataX进行维护和迭代，并且建立钉钉群方便答疑。</p><h4 id="为什么是DataX"><a href="#为什么是DataX" class="headerlink" title="为什么是DataX"></a>为什么是DataX</h4><p>DataX是阿里云DataWorks数据集成的开源版本，在阿里巴巴集团内被广泛使用的离线数据同步工具&#x2F;平台。DataX采用（plugin-framework）框架，将不同数据源的同步抽象为从源头数据源读取数据的Reader插件，以及向目标端写入数据的Writer插件，理论上DataX框架可以支持任意数据源类型的数据同步工作。</p><h3 id="安装与登录"><a href="#安装与登录" class="headerlink" title="安装与登录"></a>安装与登录</h3><h4 id="依赖环境"><a href="#依赖环境" class="headerlink" title="依赖环境"></a>依赖环境</h4><ul><li>Language: Java 8（jdk版本建议1.8.201以上）<br>Python2.7(支持Python3需要修改替换datax&#x2F;bin下面的三个python文件，替换文件在doc&#x2F;datax-web&#x2F;datax-python3下)</li><li>Environment: MacOS, Windows,Linux</li><li>Database: Mysql5.7</li></ul><h4 id="安装指南"><a href="#安装指南" class="headerlink" title="安装指南"></a>安装指南</h4><h5 id="使用源码安装"><a href="#使用源码安装" class="headerlink" title="使用源码安装"></a>使用源码安装</h5><h6 id="1：下载源码"><a href="#1：下载源码" class="headerlink" title="1：下载源码"></a>1：下载源码</h6><!-- http://git.aihuoshi.net/keystone/tool_datax_web.git --><h6 id="2：编译打包"><a href="#2：编译打包" class="headerlink" title="2：编译打包"></a>2：编译打包</h6><p>直接从Git上面获得源代码，在项目的根目录下执行如下命令</p><pre><code class="shell">mvn clean install </code></pre><p>执行成功后将会在工程的build目录下生成安装包</p><pre><code class="shell">build/datax-web-&#123;VERSION&#125;.tar.gz</code></pre><h6 id="3：开始部署"><a href="#3：开始部署" class="headerlink" title="3：开始部署"></a>3：开始部署</h6><h6 id="步骤1-解压安装包"><a href="#步骤1-解压安装包" class="headerlink" title="步骤1.解压安装包"></a>步骤1.解压安装包</h6><p>在选定的安装目录，解压安装包</p><pre><code class="shell">tar -zxvf datax-web-&#123;VERSION&#125;.tar.gz</code></pre><h6 id="步骤2-执行一键安装脚本"><a href="#步骤2-执行一键安装脚本" class="headerlink" title="步骤2.执行一键安装脚本"></a>步骤2.执行一键安装脚本</h6><p>进入解压后的目录，找到bin目录下面的install.sh文件，如果选择交互式的安装，则直接执行</p><pre><code class="shell">./bin/install.sh</code></pre><p>在交互模式下，对各个模块的package压缩包的解压以及configure配置脚本的调用，都会请求用户确认,可根据提示查看是否安装成功，如果没有安装成功，可以重复尝试； 如果不想使用交互模式，跳过确认过程，则执行以下命令安装</p><pre><code class="shell">./bin/install.sh --force</code></pre><h6 id="步骤3：数据库初始化"><a href="#步骤3：数据库初始化" class="headerlink" title="步骤3：数据库初始化"></a>步骤3：数据库初始化</h6><p>如果你的服务上安装有mysql命令，在执行安装脚本的过程中则会出现以下提醒：</p><pre><code class="shell">Scan out mysql command, so begin to initalize the databaseDo you want to initalize database with sql: [&#123;INSTALL_PATH&#125;/bin/db/datax-web.sql]? (Y/N)yPlease input the db host(default: 127.0.0.1): Please input the db port(default: 3306): Please input the db username(default: root): Please input the db password(default: ): Please input the db name(default: exchangis)</code></pre><p>按照提示输入数据库地址，端口号，用户名，密码以及数据库名称，大部分情况下即可快速完成初始化。 如果服务上并没有安装mysql命令，则可以取用目录下&#x2F;bin&#x2F;db&#x2F;datax-web.sql脚本去手动执行，完成后修改相关配置文件</p><pre><code class="shell">vi ./modules/datax-admin/conf/bootstrap.properties#Database#DB_HOST=#DB_PORT=#DB_USERNAME=#DB_PASSWORD=#DB_DATABASE=</code></pre><p>按照具体情况配置对应的值即可。</p><h6 id="步骤4：配置"><a href="#步骤4：配置" class="headerlink" title="步骤4：配置"></a>步骤4：配置</h6><p>安装完成之后，</p><p>在项目目录： &#x2F;modules&#x2F;datax-admin&#x2F;bin&#x2F;env.properties 配置邮件服务(可跳过)</p><pre><code class="shell">MAIL_USERNAME=&quot;&quot;MAIL_PASSWORD=&quot;&quot;</code></pre><p>此文件中包括一些默认配置参数，例如：server.port，具体请查看文件。</p><p>在项目目录下&#x2F;modules&#x2F;datax-execute&#x2F;bin&#x2F;env.properties 指定PYTHON_PATH的路径</p><pre><code class="shell">vi ./modules/&#123;module_name&#125;/bin/env.properties### 执行datax的python脚本地址PYTHON_PATH=### 保持和datax-admin服务的端口一致；默认是9527，如果没改datax-admin的端口，可以忽略DATAX_ADMIN_PORT=</code></pre><p>此文件中包括一些默认配置参数，例如：executor.port,json.path,data.path等，具体请查看文件。</p><h6 id="步骤5：启动服务"><a href="#步骤5：启动服务" class="headerlink" title="步骤5：启动服务"></a>步骤5：启动服务</h6><ul><li>一键启动所有服务</li></ul><pre><code class="shell">./bin/start-all.sh</code></pre><p>中途可能发生部分模块启动失败或者卡住，可以退出重复执行，如果需要改变某一模块服务端口号，则：</p><pre><code class="shell">vi ./modules/&#123;module_name&#125;/bin/env.properties</code></pre><p>找到SERVER_PORT配置项，改变它的值即可。 当然也可以单一地启动某一模块服务：</p><pre><code class="shell">./bin/start.sh -m &#123;module_name&#125;</code></pre><ul><li>一键取消所有服务</li></ul><pre><code class="shell">./bin/stop-all.sh</code></pre><p>当然也可以单一地停止某一模块服务：</p><pre><code class="shell">./bin/stop.sh -m &#123;module_name&#125;</code></pre><h6 id="步骤6：查看服务（注意！注意！）"><a href="#步骤6：查看服务（注意！注意！）" class="headerlink" title="步骤6：查看服务（注意！注意！）"></a>步骤6：查看服务（注意！注意！）</h6><p>在Linux环境下使用JPS命令，查看是否出现DataXAdminApplication和DataXExecutorApplication进程，如果存在这表示项目运行成功</p><p>如果项目启动失败，请检查启动日志：modules&#x2F;datax-admin&#x2F;bin&#x2F;console.out或者modules&#x2F;datax-executor&#x2F;bin&#x2F;console.out</p><p>:::tip<br>脚本使用的都是bash指令集，如若使用sh调用脚本，可能会有未知的错误<br>:::</p><h6 id="步骤7：运行"><a href="#步骤7：运行" class="headerlink" title="步骤7：运行"></a>步骤7：运行</h6><p>部署完成后，在浏览器中输入 <a href="http://ip:port">http://ip:port</a> 就可以访问对应的主界面（ip为datax-admin部署所在服务器ip,port为为datax-admin 指定的运行端口）</p><p>输入用户名 admin 密码 123456 就可以直接访问系统</p><h6 id="步骤8：运行日志"><a href="#步骤8：运行日志" class="headerlink" title="步骤8：运行日志"></a>步骤8：运行日志</h6><p>部署完成之后，在modules&#x2F;对应的项目&#x2F;data&#x2F;applogs下(用户也可以自己指定日志，修改application.yml 中的logpath地址即可)，用户可以根据此日志跟踪项目实际启动情况</p><p>如果执行器启动比admin快，执行器会连接失败，日志报”拒绝连接”的错误，一般是先启动admin,再启动executor,30秒之后会重连，如果成功请忽略这个异常。</p><h5 id="使用Docker-部署"><a href="#使用Docker-部署" class="headerlink" title="使用Docker 部署"></a>使用Docker 部署</h5><pre><code>构建镜像，包含Datax-web，datax，mysql,python,java1.打包tool_datax_webmvn clean install打包后在build文件夹，解压后放入docker文件夹（datax-web文件夹命名datax-web-2.1.2）2.打包dataxmvn -U clean package assembly:assembly &#39;-Dmaven.test.skip=true&#39;打包后在target文件夹，解压后放入docker文件夹（datax文件夹命名datax）3.构建镜像：docker build -t datax-web-hs:v1.0 .4.运行并开放9527和3306端口5.mysql配置，默认在容器中生成mysql，如需更改mysql数据源  5.1编译前:datax-admin模块resources中更改application.yml，可配置Apollo，也可在bootstrap.properties中设置相关变量  5.2编译后：这两个文件在datax-web-2.1.2/modules/datax-admin/conf目录下</code></pre><h4 id="登录DataX-Web"><a href="#登录DataX-Web" class="headerlink" title="登录DataX Web"></a>登录DataX Web</h4><p>启动成功后，在浏览器地址输入<code>http://ip address:9527</code>。</p><p>如果在浏览器窗口中能看到以下登录界面，表示已经成功部署并启动DataX Web</p><p><img src="/img/datax-web/image-20220117144304659.png" alt="image-20220117144304659"></p><h3 id="快速入手"><a href="#快速入手" class="headerlink" title="快速入手"></a>快速入手</h3><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p>在使用DataX的过程中，项目就是工作空间的概念，每个用户可以创建多个属于自己的项目，后续构建的同步任务需要指定项目来管理。</p><ul><li>创建：在左侧菜单栏点击项目管理，点击添加，填入项目名称和项目描述，点击确认，这样就创建好了一个工作空间。</li><li>编辑：在项目管理列表中，对每个属于用户的项目可以点击编辑按钮来修改项目的名称和描述。</li><li>删除：同样的，每个用户也有权限删除自己的项目。</li><li>导出：在现实的生产过程中，需要在不同的环境中复制离线数据同步任务，数据开发可以选择点击导出按钮，导出选择项目的所有任务配置信息，方便迁移，目前提供多种导出方式。</li></ul><p>:::warning<br>删除项目会导致项目内的所有任务也一并删除<br>:::</p><h4 id="创建数据源"><a href="#创建数据源" class="headerlink" title="创建数据源"></a>创建数据源</h4><p>DataX是离线数据同步工具，因此支持异构数据源是核心功能点，目前DataX支持以下数据源的读写</p><table><thead><tr><th align="center">数据源</th><th align="center">读</th><th align="center">写</th><th align="center">增量模式</th></tr></thead><tbody><tr><td align="center">Mysql</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">Oracle</td><td align="center">未测试</td><td align="center">未测试</td><td align="center">未测试</td></tr><tr><td align="center">Postgresql（Greenplum）</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">Sqlserver</td><td align="center">未测试</td><td align="center">未测试</td><td align="center">未测试</td></tr><tr><td align="center">Hive</td><td align="center">√</td><td align="center">√</td><td align="center">未测试</td></tr><tr><td align="center">Hbase</td><td align="center">未测试</td><td align="center">未测试</td><td align="center">未测试</td></tr><tr><td align="center">Mongodb</td><td align="center">未测试</td><td align="center">未测试</td><td align="center">未测试</td></tr><tr><td align="center">Elasticsearch</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">Clickhouse</td><td align="center">未测试</td><td align="center">未测试</td><td align="center">未测试</td></tr></tbody></table><ul><li><p>创建：在左侧菜单栏点击数据源管理，点击添加，选择对应的数据源，按要求填写数据源连接配置。在测试连接通过后，点击确认。<code>这里会出现一个弹框，后面会讲到，可以点击确认。</code></p></li><li><p>编辑：在数据源管理列表中，对每个用户创建的数据源可以进行修改参数</p><ul><li><p>自动替换：在实际开发过程中，DBA可能会改变数据源的地址或账号密码，由于DataX的数据源连接信息是保存在jobjson中的，所以不批量修改jobjson的话，会导致所有涉及到的任务都会报数据库连接错误。因此DataX提供根据数据源和任务的关联关系自动替换jobjson中的连接信息的功能，也就是上面所说的点击确认以后的弹框，点击确定后，会自动更新相关任务的信息。</p><img src="/img/datax-web/image-20220117152119388.png" alt="image-20220117152119388"  /></li></ul></li><li><p>删除：用户有权限对自己创建的数据源进行删除，目前不会一并删除相关的任务。</p></li></ul><p>:::danger<br>更新引用数据源的操作会重置相关任务的offset<br>:::</p><h4 id="配置任务"><a href="#配置任务" class="headerlink" title="配置任务"></a>配置任务</h4><p>当创建完项目以及同步需要的源数据源和目标数据源的准备工作以后，接下来就是构建数据同步任务了。</p><p>在开始之前，得先知道DataX提供什么类型的任务，在实际开发中，可以根据不同的业务需求来选择要创建的任务类型。</p><ul><li>DataX任务</li><li>Shell任务</li><li>Powershell任务</li><li>Python任务</li></ul><h5 id="创建DataX任务模板"><a href="#创建DataX任务模板" class="headerlink" title="创建DataX任务模板"></a>创建DataX任务模板</h5><p>为了避免在构建任务的过程中重复工作，DataX提供任务模板功能。</p><ul><li>创建：在左侧菜单栏点击任务管理 - DataX任务模板，点击添加，我们来介绍一下每个选项的含义。<ul><li>执行器：默认datax执行器。</li><li>路由策略：当分布式部署Datax Web的情况下，任务执行的datax执行器节点的分配策略。</li><li>阻塞处理：当任务并发阻塞或者重复提交调度时候的处理策略。</li><li>任务类型：提供Datax、Shell、Powershell、Python四种任务类型。</li><li>所属项目：该任务所属项目。</li><li>子任务：子任务的概念是，当该任务完成以后，运行子任务，简单的串行任务流可以用该功能实现。</li><li>增量模式：支持非增量模式和时间增量模式。<ul><li>时间增量模式<ul><li>增量开始时间：offset增量开始时间。</li><li>增量时间字段：<ul><li>lastTime：任务上次运行时间。</li><li>currentTime：当前时间-5min。</li></ul></li><li>增量时间格式：时间格式。</li></ul></li></ul></li><li>任务描述：任务名称。</li><li>Cron：任务定时启动的Cron表达式。<code>DataX Web对引用模板自动创建任务的cron表达式做了削峰处理，默认同时刻启动的任务不超过10个</code></li><li>报警邮件：任务运行或者调度失败日志报警邮件方式。</li><li>钉钉报警：任务运行或者调度失败日志报警钉钉发送方式。</li><li>失败重试次数：任务失败重试次数。</li><li>超时时间（分钟）：数据库session超时等待时间。</li><li>JVM启动参数：任务JVM运行参数。</li></ul></li><li>编辑：修改任务模板参数。</li><li>删除：用户有权限删除自己创建的任务模板。</li></ul><h5 id="任务构建"><a href="#任务构建" class="headerlink" title="任务构建"></a>任务构建</h5><h6 id="步骤1：构建reader"><a href="#步骤1：构建reader" class="headerlink" title="步骤1：构建reader"></a>步骤1：构建reader</h6><p>1.选择数据库源</p><p>2.选择schema</p><p>3.选择对象类型（以实体表为例）</p><p>4.选择数据库表名</p><p><img src="/img/datax-web/image-20220120170804547.png" alt="image-20220120170804547"></p><p>5.如果需要增量同步数据，则点增量时间字段的解析，如果增量时间字段不是sys_update_date则将where条件里的sys_update_date换成你对应的字段（注意时间格式需保持一致）</p><h6 id="步骤2：构建writer"><a href="#步骤2：构建writer" class="headerlink" title="步骤2：构建writer"></a>步骤2：构建writer</h6><ul><li><p>选择数据库源</p></li><li><p>写入模式选择（默认upsert）</p></li><li><p>选择schema</p></li><li><p>填写数据库表名</p></li><li><p>点击下一步</p></li></ul><p><img src="/img/datax-web/image-20220120172219160.png" alt="image-20220120172219160"></p><p><img src="/img/datax-web/image-20220120172900054.png" alt="image-20220120172900054"></p><p>:::warning<br>如果writer是Elasticsearch且index不存在则会跳出弹窗<br>:::</p><p><img src="/img/datax-web/image-20220120173009450.png" alt="image-20220120173009450"></p><p>点击确定自动创建index和alias。alias和指定_id必须要填</p><h6 id="步骤3：字段映射"><a href="#步骤3：字段映射" class="headerlink" title="步骤3：字段映射"></a>步骤3：字段映射</h6><p>单机源端字段会全部选中</p><p>注意：如果源端字段和目标字段有字段没对齐，需核对两边字段对应关系，如需修改可在右侧移动字段位置和修改字段名称</p><p><img src="/img/datax-web/image-20220120173309161.png" alt="image-20220120173309161"></p><h6 id="步骤4：构建"><a href="#步骤4：构建" class="headerlink" title="步骤4：构建"></a>步骤4：构建</h6><p>进入构建页面，先点构建会出现对应jobjson，然后点选择之前创建的DataX任务模板</p><p><img src="/img/datax-web/image-20220120173818786.png" alt="image-20220120173818786"></p><p>一切正常的话，构建成功后会跳出任务构建成功，此时选择是否执行此任务，任务就构建成功了</p><p><img src="/img/datax-web/image-20220120173941300.png" alt="image-20220120173941300"></p><h5 id="任务运行"><a href="#任务运行" class="headerlink" title="任务运行"></a>任务运行</h5><p>任务已经配好，现在就要考虑如何对任务进行调度。目前Datax Web提供定时模式和手动模式。</p><h6 id="定时模式"><a href="#定时模式" class="headerlink" title="定时模式"></a>定时模式</h6><p>每个配置成功的任务可以在任务管理中看到，初始的任务状态都是“停止”，这代表不进行定时调度，如果需要，可以单机定时开关显示“运行”，则该任务会根据任务的cron表达式定时启动。</p><h6 id="执行一次（手动模式）"><a href="#执行一次（手动模式）" class="headerlink" title="执行一次（手动模式）"></a>执行一次（手动模式）</h6><p>手动模式执行任务需要在任务管理中找到想要执行的任务，点击操作 - 执行一次提交调度。</p><h4 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h4><p>DataX Web提供可以实时查看的运行日志，我们有两个方式查看某个任务的日志</p><ul><li><p>在任务管理中找到想要查看日志的任务，点击操作 - 历史日志（最新日志）即可查看。</p></li><li><p>在日志管理中搜索任务名进行查看。</p></li></ul><h4 id="执行器管理"><a href="#执行器管理" class="headerlink" title="执行器管理"></a>执行器管理</h4><p>在集群部署方式下，对多个datax执行器节点进行分组标识，多用来解决longtime任务阻塞问题。</p><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><p>用户信息以及用户类型管理。</p><h4 id="资源监控"><a href="#资源监控" class="headerlink" title="资源监控"></a>资源监控</h4><p>对多个datax执行器的系统运行监控。</p>]]></content>
      
      
      <categories>
          
          <category> data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> datax </tag>
            
            <tag> bigdata </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
